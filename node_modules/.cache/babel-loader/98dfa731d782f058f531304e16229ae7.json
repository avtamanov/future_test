{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\WebstormProjects\\\\react-future_test\\\\src\\\\Components\\\\Table\\\\SuperTable.js\";\nimport React, { useEffect, useState } from 'react';\nimport SuperHeader from './SuperHeader';\nimport SuperBody from './SuperBody';\nimport SuperPaginator from \"./SuperPaginator\";\nimport SuperLinesSelector from \"./SuperLinesSelector\";\nimport SuperSearch from \"./SuperSearch\";\nimport SuperItemAdded from \"./SuperItemAdded\";\nimport SuperViewForm from \"./SuperViewForm\";\nconst LINES_ON_PAGE = 50; // lines on page by default\n\nconst SuperTable = React.memo(function (props) {\n  // all data from response\n  const [totalData, setTotalData] = useState([]); // client searched part of data\n\n  const [searchedData, setSearchedData] = useState([]); // part of searched data shown right now\n\n  const [curData, setCurData] = useState([]); // table utilities\n\n  const [columnNames, setColumnsNames] = useState([]);\n  const [sortedTag, setSortedTag] = useState('');\n  const [searchStr, setSearchStr] = useState(''); // pages utilities\n\n  const [choosenPage, setChoosenPage] = useState(1);\n  const [linesOnPage, setLinesOnPage] = useState(LINES_ON_PAGE); // viewFrom utilities\n\n  const [viewItem, setViewItem] = useState({}); // function for paginator click\n\n  let onPageClick = pageNum => {\n    console.log(pageNum);\n    let lastPageIcon = document.getElementsByClassName('page ' + choosenPage);\n\n    if (lastPageIcon[0] !== undefined) {\n      lastPageIcon[0].style.backgroundColor = 'white';\n      lastPageIcon[0].style.color = 'green';\n    }\n\n    let newPageIcon = document.getElementsByClassName('page ' + pageNum);\n\n    if (newPageIcon[0] !== undefined) {\n      newPageIcon[0].style.backgroundColor = 'green';\n      newPageIcon[0].style.color = 'white';\n      setChoosenPage(pageNum);\n    }\n  }; // save data after receiving request\n\n\n  useEffect(() => {\n    if (props.data && props.data !== [] && props.data[0] !== undefined) {\n      // set column names\n      let tempColumns = [];\n\n      for (let tempProps in props.data[0]) {\n        tempColumns.push(tempProps);\n      }\n\n      setColumnsNames(tempColumns);\n      console.log(props.data);\n      setSearchedData(props.data);\n      setTotalData(props.data);\n      /*\r\n                  // form pages\r\n                  let shownData = [];\r\n                  for(let i = linesOnPage*(choosenPage - 1); i < linesOnPage*choosenPage && i < props.data.length; i++){\r\n                      shownData.push(props.data[i]);\r\n                  }\r\n                  setCurData(shownData);*/\n    }\n  }, [props]);\n  useEffect(() => {\n    // update pages\n    let shownData = [];\n\n    for (let i = linesOnPage * (choosenPage - 1); i < linesOnPage * choosenPage && i < searchedData.length; i++) {\n      shownData.push(searchedData[i]);\n    }\n\n    setCurData(shownData);\n  }, [choosenPage, linesOnPage, searchedData, totalData]);\n  useEffect(() => {\n    // search\n    let searchedArr = [];\n\n    if (searchStr !== '') {\n      for (let i = 0; i < totalData.length; i++) {\n        for (let itemProp in totalData[i]) {\n          if (('' + totalData[i][itemProp]).toLowerCase().includes(searchStr)) {\n            searchedArr.push(totalData[i]);\n            break;\n          }\n        }\n      }\n\n      setSearchedData(searchedArr);\n    } else {\n      setSearchedData(totalData);\n    }\n  }, [searchStr, totalData]); // save data after sort\n\n  useEffect(() => {\n    if (sortedTag) {\n      if (sortedTag.includes('+')) {\n        setSearchedData([...searchedData.reverse()]);\n        onPageClick(1);\n      } else {\n        setSearchedData([...searchedData.sort((a, b) => a[sortedTag] < b[sortedTag] ? -1 : a[sortedTag] > b[sortedTag] ? 1 : 0)]);\n        onPageClick(1);\n      }\n    }\n  }, [sortedTag]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(SuperPaginator, {\n    page: choosenPage,\n    onPageClick: onPageClick,\n    linesTotal: props.data && props.data !== [] ? props.data.length : 0,\n    linesOnPage: linesOnPage,\n    searchString: searchStr,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(SuperLinesSelector, {\n    lines: linesOnPage,\n    setLines: setLinesOnPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(SuperSearch, {\n    str: searchStr,\n    setStr: setSearchStr,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(SuperItemAdded, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SuperHeader, {\n    columns: columnNames,\n    sortedTag: sortedTag,\n    setSortedTag: setSortedTag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(SuperBody, {\n    curData: curData,\n    setCurData: setCurData,\n    setItem: setViewItem(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(SuperViewForm, {\n    columns: columnNames,\n    item: viewItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }));\n});\nexport default SuperTable;","map":{"version":3,"sources":["C:/Users/User/WebstormProjects/react-future_test/src/Components/Table/SuperTable.js"],"names":["React","useEffect","useState","SuperHeader","SuperBody","SuperPaginator","SuperLinesSelector","SuperSearch","SuperItemAdded","SuperViewForm","LINES_ON_PAGE","SuperTable","memo","props","totalData","setTotalData","searchedData","setSearchedData","curData","setCurData","columnNames","setColumnsNames","sortedTag","setSortedTag","searchStr","setSearchStr","choosenPage","setChoosenPage","linesOnPage","setLinesOnPage","viewItem","setViewItem","onPageClick","pageNum","console","log","lastPageIcon","document","getElementsByClassName","undefined","style","backgroundColor","color","newPageIcon","data","tempColumns","tempProps","push","shownData","i","length","searchedArr","itemProp","toLowerCase","includes","reverse","sort","a","b"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport SuperHeader from './SuperHeader'\r\nimport SuperBody from './SuperBody'\r\nimport SuperPaginator from \"./SuperPaginator\";\r\nimport SuperLinesSelector from \"./SuperLinesSelector\";\r\nimport SuperSearch from \"./SuperSearch\";\r\nimport SuperItemAdded from \"./SuperItemAdded\";\r\nimport SuperViewForm from \"./SuperViewForm\";\r\n\r\nconst LINES_ON_PAGE = 50; // lines on page by default\r\n\r\nconst SuperTable = React.memo(function(props){\r\n\r\n    // all data from response\r\n    const [totalData, setTotalData] = useState([]);\r\n    // client searched part of data\r\n    const [searchedData, setSearchedData] = useState([]);\r\n    // part of searched data shown right now\r\n    const [curData, setCurData] = useState([]);\r\n\r\n    // table utilities\r\n    const [columnNames, setColumnsNames] = useState([]);\r\n    const [sortedTag, setSortedTag] = useState('');\r\n    const [searchStr, setSearchStr] = useState('');\r\n\r\n    // pages utilities\r\n    const [choosenPage, setChoosenPage] = useState(1);\r\n    const [linesOnPage, setLinesOnPage] = useState(LINES_ON_PAGE);\r\n\r\n    // viewFrom utilities\r\n    const [viewItem, setViewItem] = useState({});\r\n\r\n    // function for paginator click\r\n    let onPageClick = (pageNum) => {\r\n        console.log(pageNum);\r\n        let lastPageIcon = document.getElementsByClassName('page ' + choosenPage);\r\n        if(lastPageIcon[0] !== undefined){\r\n            lastPageIcon[0].style.backgroundColor = 'white';\r\n            lastPageIcon[0].style.color = 'green';\r\n        }\r\n\r\n        let newPageIcon = document.getElementsByClassName('page ' + pageNum);\r\n        if(newPageIcon[0] !== undefined) {\r\n            newPageIcon[0].style.backgroundColor = 'green';\r\n            newPageIcon[0].style.color = 'white';\r\n            setChoosenPage(pageNum);\r\n        }\r\n    };\r\n\r\n    // save data after receiving request\r\n    useEffect(()=>{\r\n        if(props.data && props.data !== [] && props.data[0] !== undefined){\r\n            // set column names\r\n            let tempColumns = []\r\n            for(let tempProps in props.data[0]){\r\n                tempColumns.push(tempProps);\r\n            }\r\n            setColumnsNames(tempColumns);\r\n            console.log(props.data)\r\n            setSearchedData(props.data);\r\n            setTotalData(props.data);\r\n/*\r\n            // form pages\r\n            let shownData = [];\r\n            for(let i = linesOnPage*(choosenPage - 1); i < linesOnPage*choosenPage && i < props.data.length; i++){\r\n                shownData.push(props.data[i]);\r\n            }\r\n            setCurData(shownData);*/\r\n        }\r\n    },[props]);\r\n\r\n    useEffect(()=>{\r\n                // update pages\r\n        let shownData = [];\r\n        for(let i = linesOnPage*(choosenPage - 1); i < linesOnPage*choosenPage && i < searchedData.length; i++){\r\n            shownData.push(searchedData[i]);\r\n        }\r\n        setCurData(shownData);\r\n    }, [choosenPage, linesOnPage, searchedData, totalData]);\r\n    \r\n    useEffect(()=>{\r\n        // search\r\n        let searchedArr = [];\r\n        if(searchStr !== '') {\r\n            for (let i = 0; i < totalData.length; i++) {\r\n                for (let itemProp in totalData[i]) {\r\n                    if (('' + totalData[i][itemProp]).toLowerCase().includes(searchStr)) {\r\n                        searchedArr.push(totalData[i]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            setSearchedData(searchedArr);\r\n        } else {\r\n            setSearchedData(totalData);\r\n        }\r\n    }, [searchStr, totalData])\r\n\r\n    // save data after sort\r\n    useEffect(() => {\r\n        if(sortedTag){\r\n            if(sortedTag.includes('+')) {\r\n                setSearchedData([...searchedData.reverse()]);\r\n                onPageClick(1)\r\n            }\r\n            else{\r\n                setSearchedData([...searchedData.sort((a, b) => a[sortedTag] < b[sortedTag] ? -1 : a[sortedTag] > b[sortedTag] ? 1 : 0)]);\r\n                onPageClick(1);\r\n            }\r\n        }\r\n    }, [sortedTag]);\r\n\r\n    return <div className='table'>\r\n        <SuperPaginator page={choosenPage}\r\n                        onPageClick={onPageClick}\r\n                        linesTotal={props.data && props.data !== [] ? props.data.length : 0}\r\n                        linesOnPage={linesOnPage}\r\n                        searchString={searchStr}/>\r\n        <SuperLinesSelector lines={linesOnPage} setLines={setLinesOnPage}/>\r\n        <SuperSearch str={searchStr} setStr={setSearchStr}/>\r\n        <SuperItemAdded />\r\n        <table>\r\n            <SuperHeader columns={columnNames} sortedTag={sortedTag} setSortedTag={setSortedTag}/>\r\n            <SuperBody curData={curData} setCurData={setCurData} setItem={setViewItem()}/>\r\n        </table>\r\n        <SuperViewForm columns={columnNames} item={viewItem}/>\r\n    </div>\r\n});\r\n\r\nexport default SuperTable;"]},"metadata":{},"sourceType":"module"}